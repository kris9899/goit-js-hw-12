{"version":3,"file":"index.js","sources":["../src/img/error.svg","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default \"data:image/svg+xml,%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%3e%3cpath%20fill='%23fff'%20d='M9.080%200.292c0.187-0.187%200.441-0.292%200.706-0.292h12.428c0.265%200%200.519%200.105%200.706%200.292l8.788%208.788c0.187%200.187%200.292%200.441%200.292%200.706v12.428c0%200.265-0.105%200.519-0.292%200.706l-8.788%208.788c-0.187%200.187-0.441%200.292-0.706%200.292h-12.428c-0.265%200-0.519-0.105-0.706-0.292l-8.788-8.788c-0.187-0.187-0.292-0.441-0.292-0.706v-12.428c0-0.265%200.105-0.519%200.292-0.706l8.788-8.788zM10.2%202l-8.2%208.2v11.6l8.2%208.2h11.6l8.2-8.2v-11.6l-8.2-8.2h-11.6z'%3e%3c/path%3e%3cpath%20fill='%23fff'%20d='M9.292%209.292c0.093-0.093%200.203-0.167%200.325-0.217s0.252-0.076%200.383-0.076c0.132%200%200.262%200.026%200.383%200.076s0.232%200.124%200.325%200.217l5.292%205.294%205.292-5.294c0.093-0.093%200.203-0.167%200.325-0.217s0.252-0.076%200.383-0.076c0.131%200%200.262%200.026%200.383%200.076s0.232%200.124%200.325%200.217c0.093%200.093%200.167%200.203%200.217%200.325s0.076%200.252%200.076%200.383-0.026%200.262-0.076%200.383c-0.050%200.121-0.124%200.232-0.217%200.325l-5.294%205.292%205.294%205.292c0.093%200.093%200.167%200.203%200.217%200.325s0.076%200.252%200.076%200.383-0.026%200.262-0.076%200.383c-0.050%200.121-0.124%200.232-0.217%200.325s-0.203%200.167-0.325%200.217c-0.121%200.050-0.252%200.076-0.383%200.076s-0.262-0.026-0.383-0.076c-0.121-0.050-0.232-0.124-0.325-0.217l-5.292-5.294-5.292%205.294c-0.093%200.093-0.203%200.167-0.325%200.217s-0.252%200.076-0.383%200.076-0.262-0.026-0.383-0.076c-0.121-0.050-0.232-0.124-0.325-0.217s-0.167-0.203-0.217-0.325c-0.050-0.121-0.076-0.252-0.076-0.383s0.026-0.262%200.076-0.383c0.050-0.121%200.124-0.232%200.217-0.325l5.294-5.292-5.294-5.292c-0.093-0.093-0.167-0.203-0.217-0.325s-0.076-0.252-0.076-0.383c0-0.132%200.026-0.262%200.076-0.383s0.124-0.232%200.217-0.325z'%3e%3c/path%3e%3c/svg%3e\"","'use strict';\nimport axios from 'axios';\n\nconst API_KEY = '46835246-fc67a7cc3b6e50b199f619e07';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  try {\n    const result = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page: page,\n        per_page: perPage,\n      },\n    });\n    return result.data;\n  } catch (error) {\n    console.log('Error fetching images:');\n    throw error;\n  }\n}\n","'use strict';\nimport simpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery-list');\nconst lightbox = new simpleLightbox('.large-img', {\n  overlayOpacity: 0.7,\n  captionsData: 'alt',\n  captionDelay: 250,\n  close: true,\n});\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\nexport function renderMarkup(arr) {\n  const markup = arr\n    .map(picture => {\n      const {\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      } = picture;\n      return `\n       <li class=\"img-card\">\n        <a class=\"large-img\" href=\"${largeImageURL}\">\n        <div class=\"img-wrapper\">\n        <img\n        class=\"small-img\"\n        src=\"${webformatURL}\" \n        alt=\"${tags}\"/>\n        </div>\n        </a>\n        <ul class=\"gallery-info\">\n          <li>\n          <p class=\"info-text\">Likes</p>\n           <p class=\"info-number\">${likes}</p>\n          </li>\n            <li>\n          <p class=\"info-text\">Views</p>\n           <p class=\"info-number\">${views}</p>\n          </li>\n            <li>\n          <p class=\"info-text\">Comments</p>\n           <p class=\"info-number\">${comments}</p>\n          </li>\n            <li>\n          <p class=\"info-text\">Downloads</p>\n           <p class=\"info-number\">${downloads}</p>\n          </li>\n   </ul>\n    </li>\n    `;\n    })\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  lightbox.refresh();\n}\n","'use strict';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport errorSvg from '../src/img/error.svg';\nimport { fetchImages } from './js/pixabay-api.js';\nimport { renderMarkup, clearGallery } from './js/render-functions.js';\n\nconst form = document.querySelector('.search-form');\nconst input = document.querySelector('.search-input');\nconst loader = document.querySelector('.loader');\nconst loadMoreButton = document.querySelector('.load-button');\nconst loadMoreLoader = document.querySelector('.load-more-loader');\n\nlet page = 1;\nlet perPage = 15;\nlet currentQuery = '';\nlet totalHits = 0;\nlet loadedImages = 0;\n\nform.addEventListener('submit', handleSubmit);\nloadMoreButton.addEventListener('click', loadMoreImages);\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  loader.classList.remove('visually-hidden');\n  loadMoreButton.classList.add('visually-hidden');\n\n  const query = event.target.querySelector('input').value.trim();\n  if (!query) {\n    iziToast.error({\n      titleColor: '#fff',\n      titleLineHeight: 1.5,\n      titleSize: '16px',\n      message: 'Please enter a search term.',\n      maxWidth: '432px',\n      position: 'topRight',\n      closeOnEscape: true,\n      icon: 'error',\n      iconUrl: errorSvg,\n      theme: 'dark',\n      messageSize: '16px',\n      messageLineHeight: 1.5,\n      messageColor: '#fff',\n      backgroundColor: '#ef4040',\n    });\n    input.value = '';\n    loader.classList.add('visually-hidden');\n    return;\n  }\n  if (query !== currentQuery) {\n    currentQuery = query;\n    page = 1;\n    clearGallery();\n    loadedImages = 0;\n  }\n\n  try {\n    const data = await fetchImages(currentQuery, page, perPage);\n    totalHits = data.totalHits;\n    if (data.hits.length === 0) {\n      iziToast.error({\n        titleColor: '#fff',\n        titleSize: '16px',\n        titleLineHeight: 1.5,\n        messageSize: '16px',\n        messageLineHeight: 1.5,\n        messageColor: '#fff',\n        backgroundColor: '#ef4040',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        maxWidth: '432px',\n        position: 'topRight',\n        closeOnEscape: true,\n        icon: 'error',\n        iconUrl: errorSvg,\n        theme: 'dark',\n      });\n      clearGallery();\n      loadMoreButton.classList.add('visually-hidden');\n    } else {\n      renderMarkup(data.hits);\n      loadedImages += data.hits.length;\n      page += 1;\n      loadMoreButton.classList.remove('visually-hidden');\n\n      if (loadedImages >= totalHits) {\n        loadMoreButton.classList.add('visually-hidden');\n        iziToast.info({\n          titleColor: '#fff',\n          titleLineHeight: 1.5,\n          titleSize: '16px',\n          message: \"We're sorry, but you've reached the end of search results.\",\n          maxWidth: '432px',\n          position: 'topRight',\n          closeOnEscape: true,\n          icon: 'info',\n          iconUrl: errorSvg,\n          theme: 'dark',\n          messageSize: '16px',\n          messageLineHeight: 1.5,\n          messageColor: '#fff',\n          backgroundColor: '#90d5ff',\n        });\n      }\n    }\n  } catch (error) {\n    console.log('Error fetching images:');\n  } finally {\n    console.log('Hiding loader');\n    input.value = '';\n    loader.classList.add('visually-hidden');\n  }\n}\n\nasync function loadMoreImages() {\n  loadMoreLoader.classList.remove('visually-hidden');\n  try {\n    const data = await fetchImages(currentQuery, page, perPage);\n    if (data.hits.length > 0) {\n      renderMarkup(data.hits);\n      loadedImages += data.hits.length;\n      page += 1;\n\n      const image = document.querySelector('.img-card');\n      const imageHeight = image.getBoundingClientRect().height;\n\n      window.scrollBy({\n        left: 0,\n        top: imageHeight,\n        behavior: 'smooth',\n      });\n\n      if (loadedImages >= totalHits) {\n        loadMoreButton.classList.add('visually-hidden');\n        iziToast.info({\n          titleColor: '#fff',\n          titleLineHeight: 1.5,\n          titleSize: '16px',\n          message: \"We're sorry, but you've reached the end of search results.\",\n          maxWidth: '432px',\n          position: 'topRight',\n          closeOnEscape: true,\n          icon: 'info',\n          iconUrl: errorSvg,\n          theme: 'dark',\n          messageSize: '16px',\n          messageLineHeight: 1.5,\n          messageColor: '#fff',\n          backgroundColor: '#90d5ff',\n        });\n      }\n    } else {\n      loadMoreButton.classList.add('visually-hidden');\n      iziToast.info({\n        titleColor: '#fff',\n        titleLineHeight: 1.5,\n        titleSize: '16px',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        maxWidth: '432px',\n        position: 'topRight',\n        closeOnEscape: true,\n        icon: 'info',\n        iconUrl: errorSvg,\n        theme: 'dark',\n        messageSize: '16px',\n        messageLineHeight: 1.5,\n        messageColor: '#fff',\n        backgroundColor: '#90d5ff',\n      });\n    }\n  } catch (error) {\n    console.log('Error loading more images:');\n  } finally {\n    loadMoreLoader.classList.add('visually-hidden');\n    loader.classList.add('visually-hidden');\n  }\n}\n"],"names":["errorSvg","API_KEY","BASE_URL","fetchImages","query","page","perPage","axios","error","gallery","lightbox","simpleLightbox","clearGallery","renderMarkup","arr","markup","picture","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","input","loader","loadMoreButton","loadMoreLoader","currentQuery","totalHits","loadedImages","handleSubmit","loadMoreImages","event","iziToast","data","imageHeight"],"mappings":"owBAAA,MAAeA,EAAA,i5DCGTC,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC/D,GAAI,CAYF,OAXe,MAAMC,EAAM,IAAIL,EAAU,CACvC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMC,EACN,SAAUC,CACX,CACP,CAAK,GACa,IACf,OAAQE,EAAO,CACd,cAAQ,IAAI,wBAAwB,EAC9BA,CACP,CACH,CCpBA,MAAMC,EAAU,SAAS,cAAc,eAAe,EAChDC,EAAW,IAAIC,EAAe,aAAc,CAChD,eAAgB,GAChB,aAAc,MACd,aAAc,IACd,MAAO,EACT,CAAC,EAEM,SAASC,GAAe,CAC7BH,EAAQ,UAAY,EACtB,CACO,SAASI,EAAaC,EAAK,CAChC,MAAMC,EAASD,EACZ,IAAIE,GAAW,CACd,KAAM,CACJ,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EACJ,MAAO;AAAA;AAAA,qCAEwBE,CAAa;AAAA;AAAA;AAAA;AAAA,eAInCD,CAAY;AAAA,eACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCAMiBC,CAAK;AAAA;AAAA;AAAA;AAAA,oCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,oCAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,oCAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,KAK7C,CAAK,EACA,KAAK,EAAE,EAEVd,EAAQ,mBAAmB,YAAaM,CAAM,EAE9CL,EAAS,QAAO,CAClB,CCxDA,MAAMc,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAQ,SAAS,cAAc,eAAe,EAC9CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,cAAc,EACtDC,EAAiB,SAAS,cAAc,mBAAmB,EAEjE,IAAIvB,EAAO,EACPC,EAAU,GACVuB,EAAe,GACfC,EAAY,EACZC,EAAe,EAEnBP,EAAK,iBAAiB,SAAUQ,CAAY,EAC5CL,EAAe,iBAAiB,QAASM,CAAc,EAEvD,eAAeD,EAAaE,EAAO,CACjCA,EAAM,eAAc,EACpBR,EAAO,UAAU,OAAO,iBAAiB,EACzCC,EAAe,UAAU,IAAI,iBAAiB,EAE9C,MAAMvB,EAAQ8B,EAAM,OAAO,cAAc,OAAO,EAAE,MAAM,OACxD,GAAI,CAAC9B,EAAO,CACV+B,EAAS,MAAM,CACb,WAAY,OACZ,gBAAiB,IACjB,UAAW,OACX,QAAS,8BACT,SAAU,QACV,SAAU,WACV,cAAe,GACf,KAAM,QACN,QAASnC,EACT,MAAO,OACP,YAAa,OACb,kBAAmB,IACnB,aAAc,OACd,gBAAiB,SACvB,CAAK,EACDyB,EAAM,MAAQ,GACdC,EAAO,UAAU,IAAI,iBAAiB,EACtC,MACD,CACGtB,IAAUyB,IACZA,EAAezB,EACfC,EAAO,EACPO,IACAmB,EAAe,GAGjB,GAAI,CACF,MAAMK,EAAO,MAAMjC,EAAY0B,EAAcxB,EAAMC,CAAO,EAC1DwB,EAAYM,EAAK,UACbA,EAAK,KAAK,SAAW,GACvBD,EAAS,MAAM,CACb,WAAY,OACZ,UAAW,OACX,gBAAiB,IACjB,YAAa,OACb,kBAAmB,IACnB,aAAc,OACd,gBAAiB,UACjB,QACE,2EACF,SAAU,QACV,SAAU,WACV,cAAe,GACf,KAAM,QACN,QAASnC,EACT,MAAO,MACf,CAAO,EACDY,IACAe,EAAe,UAAU,IAAI,iBAAiB,IAE9Cd,EAAauB,EAAK,IAAI,EACtBL,GAAgBK,EAAK,KAAK,OAC1B/B,GAAQ,EACRsB,EAAe,UAAU,OAAO,iBAAiB,EAE7CI,GAAgBD,IAClBH,EAAe,UAAU,IAAI,iBAAiB,EAC9CQ,EAAS,KAAK,CACZ,WAAY,OACZ,gBAAiB,IACjB,UAAW,OACX,QAAS,6DACT,SAAU,QACV,SAAU,WACV,cAAe,GACf,KAAM,OACN,QAASnC,EACT,MAAO,OACP,YAAa,OACb,kBAAmB,IACnB,aAAc,OACd,gBAAiB,SAC3B,CAAS,GAGN,MAAe,CACd,QAAQ,IAAI,wBAAwB,CACxC,QAAY,CACR,QAAQ,IAAI,eAAe,EAC3ByB,EAAM,MAAQ,GACdC,EAAO,UAAU,IAAI,iBAAiB,CACvC,CACH,CAEA,eAAeO,GAAiB,CAC9BL,EAAe,UAAU,OAAO,iBAAiB,EACjD,GAAI,CACF,MAAMQ,EAAO,MAAMjC,EAAY0B,EAAcxB,EAAMC,CAAO,EAC1D,GAAI8B,EAAK,KAAK,OAAS,EAAG,CACxBvB,EAAauB,EAAK,IAAI,EACtBL,GAAgBK,EAAK,KAAK,OAC1B/B,GAAQ,EAGR,MAAMgC,EADQ,SAAS,cAAc,WAAW,EACtB,sBAAqB,EAAG,OAElD,OAAO,SAAS,CACd,KAAM,EACN,IAAKA,EACL,SAAU,QAClB,CAAO,EAEGN,GAAgBD,IAClBH,EAAe,UAAU,IAAI,iBAAiB,EAC9CQ,EAAS,KAAK,CACZ,WAAY,OACZ,gBAAiB,IACjB,UAAW,OACX,QAAS,6DACT,SAAU,QACV,SAAU,WACV,cAAe,GACf,KAAM,OACN,QAASnC,EACT,MAAO,OACP,YAAa,OACb,kBAAmB,IACnB,aAAc,OACd,gBAAiB,SAC3B,CAAS,EAET,MACM2B,EAAe,UAAU,IAAI,iBAAiB,EAC9CQ,EAAS,KAAK,CACZ,WAAY,OACZ,gBAAiB,IACjB,UAAW,OACX,QAAS,6DACT,SAAU,QACV,SAAU,WACV,cAAe,GACf,KAAM,OACN,QAASnC,EACT,MAAO,OACP,YAAa,OACb,kBAAmB,IACnB,aAAc,OACd,gBAAiB,SACzB,CAAO,CAEJ,MAAe,CACd,QAAQ,IAAI,4BAA4B,CAC5C,QAAY,CACR4B,EAAe,UAAU,IAAI,iBAAiB,EAC9CF,EAAO,UAAU,IAAI,iBAAiB,CACvC,CACH"}